<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MATHISON - M√°quinas de Turing Reales</title>
    <link rel="stylesheet" href="css/style.css">
    <meta name="description" content="Calculadora binaria educativa con m√°quinas de Turing REALES ejecut√°ndose paso a paso">
    <meta name="keywords" content="m√°quina de turing, binario, calculadora, educaci√≥n, ciencias de la computaci√≥n, algoritmos reales">
    <meta name="author" content="Proyecto Educativo MATHISON">
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ü§ñ</text></svg>">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="">
    <meta property="og:title" content="MATHISON - M√°quinas de Turing Reales">
    <meta property="og:description" content="Visualiza c√≥mo las m√°quinas de Turing procesan operaciones binarias paso a paso de manera aut√©ntica">
    <meta property="og:image" content="">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="">
    <meta property="twitter:title" content="MATHISON - M√°quinas de Turing Reales">
    <meta property="twitter:description" content="Calculadora educativa con m√°quinas de Turing aut√©nticas">
</head>
<body>
    <div class="container">
        <header>
            <h1>ü§ñ MATHISON</h1>
            <p>M√°quinas de Turing <strong>REALES</strong> procesando operaciones binarias paso a paso</p>
            <div class="header-badges" style="margin-top: 15px;">
                <span class="badge" style="background: rgba(255,255,255,0.2); padding: 5px 12px; border-radius: 15px; font-size: 0.9rem; margin: 0 5px;">
                    ‚ú® Ejecuci√≥n Aut√©ntica
                </span>
                <span class="badge" style="background: rgba(255,255,255,0.2); padding: 5px 12px; border-radius: 15px; font-size: 0.9rem; margin: 0 5px;">
                    üîç Paso a Paso
                </span>
                <span class="badge" style="background: rgba(255,255,255,0.2); padding: 5px 12px; border-radius: 15px; font-size: 0.9rem; margin: 0 5px;">
                    üìö Educativo
                </span>
            </div>
        </header>

        <main>
            <!-- Secci√≥n de c√°lculo -->
            <section class="calculator-section">
                <h2>üßÆ Calculadora Binaria</h2>
                
                <div class="input-group">
                    <label for="expression">Expresi√≥n Binaria:</label>
                    <input type="text" 
                           id="expression" 
                           placeholder="Ej: (1 + 1) * 10 - ¬°Prueba m√°quinas reales!"
                           class="expression-input"
                           autocomplete="off"
                           spellcheck="false">
                    <button id="calculate-btn" class="calculate-btn">üöÄ Calcular</button>
                    <button id="step-btn" class="step-btn" disabled>üëÅÔ∏è Paso a Paso</button>
                    <button id="reset-btn" class="reset-btn">üîÑ Reiniciar</button>
                </div>
                
                <!-- Panel de ejemplos r√°pidos -->
                <div class="quick-examples" style="margin: 15px 0; padding: 15px; background: #e6fffa; border-radius: 8px; border-left: 4px solid #38a169;">
                    <h4 style="margin: 0 0 10px 0; color: #38a169;">üéØ Ejemplos R√°pidos (haz clic para probar):</h4>
                    <div class="example-buttons" style="display: flex; flex-wrap: wrap; gap: 8px;">
                        <button class="example-btn" onclick="loadExample('1 + 1')" style="padding: 6px 12px; background: white; border: 1px solid #38a169; border-radius: 4px; cursor: pointer; font-size: 0.9rem;">1 + 1 (Real)</button>
                        <button class="example-btn" onclick="loadExample('10 + 11')" style="padding: 6px 12px; background: white; border: 1px solid #38a169; border-radius: 4px; cursor: pointer; font-size: 0.9rem;">10 + 11</button>
                        <button class="example-btn" onclick="loadExample('101 + 110')" style="padding: 6px 12px; background: white; border: 1px solid #38a169; border-radius: 4px; cursor: pointer; font-size: 0.9rem;">101 + 110</button>
                        <button class="example-btn" onclick="loadExample('(1 + 1) * 10')" style="padding: 6px 12px; background: white; border: 1px solid #38a169; border-radius: 4px; cursor: pointer; font-size: 0.9rem;">(1 + 1) * 10</button>
                        <button class="example-btn" onclick="loadExample('1100 / 11')" style="padding: 6px 12px; background: white; border: 1px solid #38a169; border-radius: 4px; cursor: pointer; font-size: 0.9rem;">1100 / 11</button>
                        <button class="example-btn" onclick="loadRandomExample()" style="padding: 6px 12px; background: #4299e1; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 0.9rem;">üé≤ Aleatorio</button>
                    </div>
                </div>
                
                <div class="help-text">
                    <p><strong>ü§ñ M√ÅQUINAS DE TURING REALES:</strong> Esta calculadora ejecuta aut√©nticas m√°quinas de Turing que procesan operaciones binarias paso a paso</p>
                    <p><strong>Operadores soportados:</strong> + (suma), - (resta), * (multiplicaci√≥n), / (divisi√≥n)</p>
                    <p><strong>Par√©ntesis:</strong> Usa ( ) para cambiar el orden de las operaciones</p>
                    <p><strong>Navegaci√≥n:</strong> ‚Üê ‚Üí para pasos, Espacio para auto-play, clic en pasos para saltar</p>
                    <p><strong>üìú Control de Scroll:</strong> El bot√≥n "Scroll OFF/ON" controla si la vista salta autom√°ticamente al historial. Por defecto est√° desactivado para mejor observaci√≥n de la cinta.</p>
                    <p><strong>üí° Tip:</strong> Prueba primero con "1 + 1" para ver una m√°quina completamente real, luego experimenta con expresiones complejas</p>
                </div>
            </section>

            <!-- Secci√≥n de visualizaci√≥n -->
            <section class="visualization-section">
                <div class="machine-info">
                    <h3>üîß Estado de la M√°quina de Turing</h3>
                    <div class="machine-status">
                        <div class="status-item">
                            <span class="label">Operaci√≥n:</span>
                            <span id="current-operation" class="value">-</span>
                        </div>
                        <div class="status-item">
                            <span class="label">Estado:</span>
                            <span id="current-state" class="value">q0</span>
                        </div>
                        <div class="status-item">
                            <span class="label">Posici√≥n:</span>
                            <span id="head-position" class="value">0</span>
                        </div>
                        <div class="status-item">
                            <span class="label">S√≠mbolo Actual:</span>
                            <span id="current-symbol" class="value">-</span>
                        </div>
                        <div class="status-item">
                            <span class="label">Transici√≥n:</span>
                            <span id="current-transition" class="value">-</span>
                        </div>
                        <div class="status-item">
                            <span class="label">Paso:</span>
                            <span id="current-step-display" class="value">0/0</span>
                        </div>
                    </div>
                </div>

                <div class="tape-container">
                    <h3>üéûÔ∏è Cinta de la M√°quina de Turing</h3>
                    <div class="tape-wrapper">
                        <div id="tape" class="tape">
                            <div class="tape-cell empty">B</div>
                        </div>
                        <div id="tape-head" class="tape-head">‚ñº</div>
                    </div>
                    
                    <!-- Leyenda de s√≠mbolos -->
                    <div class="symbol-legend">
                        <h4>üìñ Leyenda de S√≠mbolos:</h4>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 8px;">
                            <span><strong>0, 1:</strong> D√≠gitos binarios</span>
                            <span><strong>#:</strong> Separador</span>
                            <span><strong>X, Y:</strong> Marcadores</span>
                            <span><strong>B:</strong> Blanco/vac√≠o</span>
                            <span><strong>+, -, *, /:</strong> Operadores</span>
                            <span><strong>C:</strong> Acarreo</span>
                        </div>
                    </div>
                </div>

                <!-- Controles de navegaci√≥n -->
                <div class="controls">
                    <button id="prev-step" class="control-btn" disabled>‚èÆÔ∏è Anterior</button>
                    <button id="next-step" class="control-btn" disabled>‚è≠Ô∏è Siguiente</button>
                    <button id="auto-play" class="control-btn" disabled>‚ñ∂Ô∏è Auto</button>
                    
                    <div class="speed-control" style="display: flex; align-items: center; gap: 10px;">
                        <span class="speed-label">Velocidad: Normal</span>
                        <input type="range" id="speed-slider" min="100" max="2000" value="800" class="speed-slider">
                    </div>
                    
                    <button id="help-btn" class="control-btn" onclick="showHelp()" style="background: #38a169;">‚ùì Ayuda</button>
                </div>
                
                <!-- Instrucciones de teclado -->
                <div class="keyboard-instructions" style="margin-top: 10px; text-align: center; font-size: 0.9rem; color: #4a5568;">
                    <strong>‚å®Ô∏è Atajos:</strong> ‚Üê ‚Üí (navegar pasos) | Espacio (auto-play) | S (toggle scroll) | Enter (calcular)
                </div>
            </section>

            <!-- Secci√≥n de resultado -->
            <section class="result-section">
                <h3>üìä Resultado</h3>
                <div class="result-display">
                    <div class="result-item">
                        <span class="label">Binario:</span>
                        <span id="result-binary" class="result-value">-</span>
                    </div>
                    <div class="result-item">
                        <span class="label">Decimal:</span>
                        <span id="result-decimal" class="result-value">-</span>
                    </div>
                    <div class="result-item">
                        <span class="label">M√°quinas Ejecutadas:</span>
                        <span id="machines-count" class="result-value">0</span>
                    </div>
                    <div class="result-item">
                        <span class="label">Pasos Totales:</span>
                        <span id="total-steps" class="result-value">0</span>
                    </div>
                </div>
            </section>

            <!-- Secci√≥n de historial de pasos -->
            <section class="steps-section">
                <h3>üìú Historial de Ejecuci√≥n</h3>
                <div id="steps-log" class="steps-log">
                    <div class="welcome-message" style="text-align: center; padding: 30px; color: #4a5568;">
                        <h4 style="margin-bottom: 15px;">üöÄ ¬°Bienvenido a MATHISON!</h4>
                        <p style="margin-bottom: 10px;">Ingresa una expresi√≥n binaria arriba para ver m√°quinas de Turing <strong>reales</strong> en acci√≥n.</p>
                        <p style="font-size: 0.9rem; opacity: 0.8;">Cada paso que ver√°s es una transici√≥n aut√©ntica de una m√°quina de Turing procesando tu operaci√≥n.</p>
                        
                        <div style="margin-top: 20px; padding: 15px; background: #f0f8ff; border-radius: 8px; text-align: left;">
                            <h5 style="margin-bottom: 10px; color: #2d3748;">üéØ Sugerencias para empezar:</h5>
                            <ul style="margin-left: 20px; font-size: 0.9rem;">
                                <li>Prueba <strong>"1 + 1"</strong> para ver una m√°quina simple pero real</li>
                                <li>Luego <strong>"10 + 11"</strong> para algoritmos m√°s complejos</li>
                                <li>Finalmente <strong>"(1 + 1) * 10"</strong> para m√∫ltiples m√°quinas</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <footer>
            <div style="text-align: center; padding: 20px 0;">
                <p>ü§ñ <strong>MATHISON</strong> - Implementaci√≥n educativa de M√°quinas de Turing reales para operaciones binarias</p>
                <p style="font-size: 0.9rem; opacity: 0.8; margin-top: 8px;">
                    Desarrollado con ‚ù§Ô∏è para ense√±ar los fundamentos de la computaci√≥n te√≥rica
                </p>
                <div style="margin-top: 15px;">
                    <span style="background: rgba(255,255,255,0.2); padding: 5px 10px; border-radius: 15px; font-size: 0.8rem; margin: 0 5px;">
                        JavaScript Puro
                    </span>
                    <span style="background: rgba(255,255,255,0.2); padding: 5px 10px; border-radius: 15px; font-size: 0.8rem; margin: 0 5px;">
                        Algoritmos Aut√©nticos
                    </span>
                    <span style="background: rgba(255,255,255,0.2); padding: 5px 10px; border-radius: 15px; font-size: 0.8rem; margin: 0 5px;">
                        C√≥digo Abierto
                    </span>
                </div>
            </div>
        </footer>
    </div>

    <!-- Scripts -->
    <script src="js/turing-machine.js"></script>
    <script src="js/binary-operations.js"></script>
    <script src="js/expression-parser.js"></script>
    <script src="js/visualization.js"></script>
    <script src="js/main.js"></script>
    
    <!-- Scripts adicionales para funcionalidad mejorada -->
    <script>
        // Funci√≥n para cargar ejemplos desde botones
        function loadExample(expression) {
            document.getElementById('expression').value = expression;
            if (window.app) {
                app.showNotification(`Ejemplo cargado: ${expression}`, 'info');
                setTimeout(() => {
                    app.calculateExpression();
                }, 200);
            }
        }
        
        // Funci√≥n para cargar ejemplo aleatorio
        function loadRandomExample() {
            if (window.ExpressionParser) {
                const examples = ExpressionParser.getExamples();
                const allExamples = [...examples.simple, ...examples.medium, ...examples.complex];
                const randomExample = allExamples[Math.floor(Math.random() * allExamples.length)];
                loadExample(randomExample);
            }
        }
        
        // Actualizar contadores en la secci√≥n de resultado
        function updateResultCounters(evaluation) {
            const machinesCountElement = document.getElementById('machines-count');
            const totalStepsElement = document.getElementById('total-steps');
            
            if (machinesCountElement && evaluation && evaluation.machines) {
                machinesCountElement.textContent = evaluation.machines.length.toString();
                
                const totalSteps = evaluation.machines.reduce((sum, m) => sum + m.machine.history.length, 0);
                if (totalStepsElement) {
                    totalStepsElement.textContent = totalSteps.toString();
                }
            }
        }
        
        // Event listener para actualizar contadores cuando se carga la aplicaci√≥n
        document.addEventListener('DOMContentLoaded', function() {
            // Mensaje de bienvenida en consola
            console.log(`
ü§ñ MATHISON - M√°quinas de Turing Reales Cargado
==============================================

‚ú® Funcionalidades disponibles:
- M√°quinas de Turing completamente aut√©nticas
- Visualizaci√≥n paso a paso de transiciones reales
- M√∫ltiples algoritmos: suma, resta, multiplicaci√≥n, divisi√≥n
- Navegaci√≥n interactiva entre pasos y m√°quinas
- Expresiones complejas con par√©ntesis

üéØ Prueba estos ejemplos:
- B√°sico: "1 + 1" 
- Intermedio: "101 + 110"
- Avanzado: "(1 + 1) * 10"

üìö Usa F12 para ver logs detallados de ejecuci√≥n
            `);
            
            // Configurar tooltips y ayudas adicionales
            const expressionInput = document.getElementById('expression');
            if (expressionInput) {
                expressionInput.addEventListener('focus', function() {
                    this.setAttribute('title', 'Ingresa expresiones como: 1+1, (10+11)*10, 101-11. Usa solo d√≠gitos binarios (0,1) y operadores (+,-,*,/)');
                });
            }
        });
        
        // Interceptar eventos de la aplicaci√≥n para actualizar contadores
        if (window.addEventListener) {
            window.addEventListener('calculationComplete', function(event) {
                if (event.detail && event.detail.evaluation) {
                    updateResultCounters(event.detail.evaluation);
                }
            });
        }
        
        // Analytics y seguimiento (opcional)
        function trackUsage(action, details) {
            console.log(`üìä Uso registrado: ${action}`, details);
            // Aqu√≠ podr√≠as agregar analytics reales si lo deseas
        }
        
        // Funci√≥n para mostrar informaci√≥n del sistema
        function showSystemInfo() {
            const info = {
                userAgent: navigator.userAgent,
                language: navigator.language,
                screen: `${screen.width}x${screen.height}`,
                viewport: `${window.innerWidth}x${window.innerHeight}`,
                timestamp: new Date().toISOString()
            };
            
            console.log('üíª Informaci√≥n del sistema:', info);
            return info;
        }
        
        // Mostrar informaci√≥n al cargar
        setTimeout(showSystemInfo, 1000);
    </script>

    <!-- Estilos adicionales para mejoras espec√≠ficas -->
    <style>
        .example-btn:hover {
            background: #f0f8ff !important;
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .welcome-message {
            animation: fadeIn 1s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .header-badges .badge {
            animation: slideInDown 0.6s ease-out;
            animation-fill-mode: both;
        }
        
        .header-badges .badge:nth-child(1) { animation-delay: 0.1s; }
        .header-badges .badge:nth-child(2) { animation-delay: 0.2s; }
        .header-badges .badge:nth-child(3) { animation-delay: 0.3s; }
        
        @keyframes slideInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* Mejora de accesibilidad */
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
        
        /* Modo alto contraste */
        @media (prefers-contrast: high) {
            .tape-cell {
                border-width: 3px;
            }
            
            .control-btn {
                border: 2px solid currentColor;
            }
        }
    </style>
</body>
</html>